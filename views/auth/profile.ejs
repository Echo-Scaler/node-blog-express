<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Profile - Byte & Beyond</title>
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <%- include('../partials/header') %>

    <main>
      <div class="container">
        <div class="profile-grid">
          <div class="form-card glass">
            <h1 style="font-size: 28px; font-weight: 700; margin-bottom: 24px">
              Edit Profile
            </h1>

            <form id="profile-form">
              <!-- Avatar Section -->
              <div class="avatar-section">
                <div
                  class="avatar-wrapper"
                  onclick="document.getElementById('avatar-input').click()"
                >
                  <img
                    id="avatar-img"
                    src=""
                    style="
                      width: 100%;
                      height: 100%;
                      object-fit: cover;
                      display: none;
                    "
                  />
                  <div
                    id="avatar-placeholder"
                    style="
                      width: 100%;
                      height: 100%;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      background: #f1f5f9;
                      color: #94a3b8;
                      font-size: 40px;
                      font-weight: 700;
                    "
                  >
                    U
                  </div>
                </div>
                <button
                  type="button"
                  class="btn btn-ghost btn-sm"
                  style="margin-top: 12px"
                  onclick="document.getElementById('avatar-input').click()"
                >
                  Tap to change photo
                </button>
                <input
                  type="file"
                  id="avatar-input"
                  name="avatar"
                  accept="image/*"
                  style="display: none"
                />
              </div>

              <!-- Form Row: Name & Username -->
              <div class="form-row">
                <div class="form-group">
                  <label for="displayName">Display Name</label>
                  <input
                    type="text"
                    id="displayName"
                    name="displayName"
                    class="form-control"
                    placeholder="e.g. Alex Smith"
                  />
                </div>

                <div class="form-group">
                  <label for="username">Username</label>
                  <div style="position: relative">
                    <span
                      style="
                        position: absolute;
                        left: 12px;
                        top: 12px;
                        color: var(--text-secondary);
                        font-weight: 500;
                      "
                      >@</span
                    >
                    <input
                      type="text"
                      id="username"
                      class="form-control"
                      style="padding-left: 32px; background: #f8fafc"
                      disabled
                    />
                  </div>
                </div>
              </div>

              <!-- Bio -->
              <div class="form-group">
                <label for="bio">Bio</label>
                <textarea
                  id="bio"
                  name="bio"
                  class="form-control"
                  rows="4"
                  maxlength="160"
                  placeholder="Tell your story..."
                ></textarea>
                <div
                  style="
                    font-size: 12px;
                    color: var(--text-secondary);
                    text-align: right;
                    margin-top: 6px;
                  "
                >
                  Max 160 chars
                </div>
              </div>

              <!-- Email -->
              <div class="form-group">
                <label style="color: var(--text-secondary)"
                  >Email Address</label
                >
                <input
                  type="email"
                  id="email"
                  class="form-control"
                  disabled
                  style="background: #f8fafc; color: var(--text-secondary)"
                />
              </div>

              <div
                style="
                  margin-top: 40px;
                  display: flex;
                  gap: 16px;
                  justify-content: flex-end;
                  border-top: 1px solid var(--border-light);
                  padding-top: 24px;
                "
              >
                <a href="/dashboard" class="btn btn-ghost">Cancel</a>
                <button
                  type="submit"
                  class="btn btn-primary"
                  style="min-width: 140px"
                >
                  Save Changes
                </button>
              </div>
            </form>
          </div>

          <div class="form-card glass">
            <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 16px">
              Recent Activity
            </h3>
            <div id="recent-activity-list" class="activity-list">
              <div
                style="
                  padding: 20px;
                  text-align: center;
                  color: var(--text-secondary);
                  font-size: 13px;
                "
              >
                Loading activity...
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script src="/js/auth.js"></script>
    <script src="/js/profile.js"></script>
  </body>
</html>
